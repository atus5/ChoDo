# ğŸ” HÆ°á»›ng Dáº«n Äáº·t HÃ ng KhÃ´ GÃ  - Luá»“ng Mua HÃ ng HoÃ n Chá»‰nh

## âœ… TÃ­nh NÄƒng ÄÃ£ HoÃ n ThÃ nh

### 1. **Luá»“ng Mua HÃ ng** (ChiTietPhim â†’ DonHang)
- âœ… Chá»n sáº£n pháº©m khÃ´ gÃ 
- âœ… Chá»n loáº¡i vá»‹ (7 lá»±a chá»n)
- âœ… Chá»n kÃ­ch thÆ°á»›c gÃ³i (4 option: 100g, 200g, 500g, 1kg)
- âœ… Chá»n sá»‘ lÆ°á»£ng
- âœ… ThÃªm ghi chÃº Ä‘Æ¡n hÃ ng (tÃ¹y chá»n)
- âœ… TÃ­nh toÃ¡n tá»•ng tiá»n tá»± Ä‘á»™ng
- âœ… Chuyá»ƒn dá»¯ liá»‡u sang trang Ä‘áº·t hÃ ng via sessionStorage

### 2. **Trang Äáº·t HÃ ng (DonHang)** - Äáº§y Äá»§ Chá»©c NÄƒng

#### **A. Hiá»ƒn Thá»‹ Chi Tiáº¿t Sáº£n Pháº©m**
- âœ… HÃ¬nh áº£nh sáº£n pháº©m (VOZ.VN)
- âœ… TÃªn sáº£n pháº©m
- âœ… Loáº¡i vá»‹ Ä‘Ã£ chá»n
- âœ… KÃ­ch thÆ°á»›c + sá»‘ lÆ°á»£ng
- âœ… GiÃ¡ tá»«ng gÃ³i
- âœ… Tá»•ng tiá»n sáº£n pháº©m

#### **B. ThÃ´ng Tin Giao HÃ ng**
- âœ… Form nháº­p tÃªn ngÆ°á»i nháº­n (báº¯t buá»™c)
- âœ… Form nháº­p sá»‘ Ä‘iá»‡n thoáº¡i (báº¯t buá»™c)
- âœ… Form nháº­p Ä‘á»‹a chá»‰ giao hÃ ng (báº¯t buá»™c)
- âœ… Lá»±a chá»n phÆ°Æ¡ng thá»©c giao:
  - **Express (2-3 giá»)** - 30.000â‚«
  - **ThÆ°á»ng (1-2 ngÃ y)** - 15.000â‚«
  - **Láº¥y táº¡i cá»­a hÃ ng** - Miá»…n phÃ­
- âœ… Form ghi chÃº giao hÃ ng (tÃ¹y chá»n)

#### **C. PhÆ°Æ¡ng Thá»©c Thanh ToÃ¡n** (4 CÃ¡ch)

**1. ğŸ’³ Tháº» NgÃ¢n HÃ ng**
   - Visa, Mastercard, JCB
   - YÃªu cáº§u nháº­p:
     - TÃªn chá»§ tháº» (báº¯t buá»™c)
     - Sá»‘ tháº» 16 chá»¯ sá»‘ (báº¯t buá»™c)
     - NgÃ y háº¿t háº¡n MM/YY (báº¯t buá»™c)
     - CVV 3-4 chá»¯ sá»‘ (báº¯t buá»™c)

**2. ğŸ’° VÃ­ Äiá»‡n Tá»­**
   - Momo, ZaloPay, AirPay
   - KhÃ´ng cáº§n nháº­p thÃ´ng tin tháº»

**3. ğŸ¦ Chuyá»ƒn Khoáº£n NgÃ¢n HÃ ng**
   - Chuyá»ƒn khoáº£n qua NAPAS
   - KhÃ´ng cáº§n nháº­p thÃ´ng tin tháº»

**4. ğŸ“¦ Thanh ToÃ¡n Khi Nháº­n HÃ ng (COD)**
   - Tráº£ tiá»n khi nháº­n hÃ ng
   - KhÃ´ng cáº§n nháº­p thÃ´ng tin tháº»

#### **D. MÃ£ Khuyáº¿n MÃ£i**
- âœ… Form nháº­p mÃ£ khuyáº¿n mÃ£i (tÃ¹y chá»n)
- âœ… NÃºt "Ãp Dá»¥ng"
- âœ… CÃ¡c mÃ£ máº«u cÃ³ sáºµn:
  - `WELCOME10` â†’ Giáº£m 50.000â‚«
  - `CHODEN20` â†’ Giáº£m 100.000â‚«
  - `FREE50` â†’ Giáº£m 50.000â‚«

#### **E. TÃ³m Táº¯t ÄÆ¡n HÃ ng**
Hiá»ƒn thá»‹ chi tiáº¿t giÃ¡:
```
Sáº£n pháº©m:        [Tá»•ng tiá»n]
PhÃ­ giao hÃ ng:   [Theo lá»±a chá»n]
Thuáº¿ VAT (10%):  [TÃ­nh tá»± Ä‘á»™ng]
Giáº£m giÃ¡:        [Tá»« mÃ£ khuyáº¿n mÃ£i náº¿u cÃ³]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Tá»”NG Cá»˜NG:       [Tá»•ng cuá»‘i cÃ¹ng]
```

### 3. **Validation & XÃ¡c Thá»±c**
- âœ… Báº¯t buá»™c nháº­p tÃªn ngÆ°á»i nháº­n
- âœ… Báº¯t buá»™c nháº­p SÄT há»£p lá»‡
- âœ… Báº¯t buá»™c nháº­p Ä‘á»‹a chá»‰
- âœ… Náº¿u chá»n tháº» ngÃ¢n hÃ ng:
  - Kiá»ƒm tra tÃªn chá»§ tháº»
  - Kiá»ƒm tra sá»‘ tháº» (tá»‘i thiá»ƒu 16 chá»¯)
  - Kiá»ƒm tra ngÃ y háº¿t háº¡n
  - Kiá»ƒm tra CVV (tá»‘i thiá»ƒu 3 chá»¯)

### 4. **NÃºt HÃ nh Äá»™ng**
- âœ… **Quay Láº¡i** - Quay vá» trang trÆ°á»›c
- âœ… **Thanh ToÃ¡n [Sá»‘ tiá»n]** - Gá»­i Ä‘Æ¡n hÃ ng
  - Hiá»ƒn thá»‹ tá»•ng tiá»n thá»±c táº¿

### 5. **Xá»­ LÃ½ Sau Khi Thanh ToÃ¡n**
- âœ… Gá»­i POST request tá»›i `/api/client/don-hang/create`
- âœ… Gá»“m: sáº£n pháº©m, giao hÃ ng, thanh toÃ¡n
- âœ… XÃ³a dá»¯ liá»‡u sessionStorage
- âœ… Chuyá»ƒn hÆ°á»›ng tá»›i `/lich-su-don-hang` (hoáº·c home náº¿u lá»—i)
- âœ… Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng

---

## ğŸ¬ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng (Step-by-step)

### **BÆ°á»›c 1: Chá»n Sáº£n Pháº©m**
1. Truy cáº­p trang sáº£n pháº©m: `/chi-tiet-phim/[id]`
2. KÃ©o xuá»‘ng tÃ¬m nÃºt **"ğŸ” Mua khÃ´ gÃ "**
3. Click nÃºt Ä‘á»ƒ má»Ÿ modal Ä‘áº·t hÃ ng

### **BÆ°á»›c 2: Cáº¥u HÃ¬nh Sáº£n Pháº©m**
Trong modal:
- Chá»n **loáº¡i vá»‹** (má»—i vá»‹ cÃ³ mÃ u sáº¯c riÃªng)
- Chá»n **kÃ­ch thÆ°á»›c gÃ³i** (báº£ng 2x2 hiá»ƒn thá»‹)
- Äiá»u chá»‰nh **sá»‘ lÆ°á»£ng** báº±ng nÃºt +/-
- (TÃ¹y chá»n) ThÃªm **ghi chÃº** (VD: "ThÃªm muá»‘i")
- Xem **tá»•ng tiá»n** cáº­p nháº­t realtime

### **BÆ°á»›c 3: Gá»­i ÄÆ¡n HÃ ng**
- Click **"ThÃªm VÃ o Giá»"** (hoáº·c "Thanh ToÃ¡n Ngay")
- Há»‡ thá»‘ng chuyá»ƒn tá»›i trang `/don-hang`

### **BÆ°á»›c 4: Nháº­p ThÃ´ng Tin Giao HÃ ng**
**BÃªn trÃ¡i (Cá»™t 1):**
- Nháº­p **tÃªn ngÆ°á»i nháº­n** (báº¯t buá»™c)
- Nháº­p **SÄT liÃªn láº¡c** (báº¯t buá»™c)
- Nháº­p **Ä‘á»‹a chá»‰ giao hÃ ng** Ä‘áº§y Ä‘á»§ (báº¯t buá»™c)
- Chá»n **phÆ°Æ¡ng thá»©c giao**:
  - Express (nhanh, tÃ­nh phÃ­)
  - ThÆ°á»ng (cháº­m, tÃ­nh phÃ­ Ã­t hÆ¡n)
  - Láº¥y táº¡i cá»­a hÃ ng (miá»…n phÃ­)
- (TÃ¹y chá»n) Ghi chÃº cho shipper

### **BÆ°á»›c 5: Chá»n PhÆ°Æ¡ng Thá»©c Thanh ToÃ¡n**
**CÃ¡ch 1: Tháº» NgÃ¢n HÃ ng** ğŸ’³
1. Click card "Tháº» NgÃ¢n HÃ ng"
2. Nháº­p **tÃªn chá»§ tháº»** (VD: PHAM THI DUNG)
3. Nháº­p **sá»‘ tháº»** 16 chá»¯ (VD: 1234567890123456)
4. Nháº­p **MM/YY** (VD: 12/25)
5. Nháº­p **CVV** (VD: 123)

**CÃ¡ch 2: VÃ­ Äiá»‡n Tá»­** ğŸ’°
- Click card "VÃ­ Äiá»‡n Tá»­"
- KhÃ´ng cáº§n nháº­p thÃªm thÃ´ng tin

**CÃ¡ch 3: Chuyá»ƒn Khoáº£n** ğŸ¦
- Click card "Chuyá»ƒn Khoáº£n NgÃ¢n HÃ ng"
- KhÃ´ng cáº§n nháº­p thÃªm thÃ´ng tin

**CÃ¡ch 4: COD** ğŸ“¦
- Click card "Thanh ToÃ¡n Khi Nháº­n HÃ ng"
- Tráº£ tiá»n trá»±c tiáº¿p vá»›i shipper

### **BÆ°á»›c 6: Ãp Dá»¥ng MÃ£ Khuyáº¿n MÃ£i (TÃ¹y Chá»n)**
1. Nháº­p mÃ£ khuyáº¿n mÃ£i (VD: `WELCOME10`)
2. Click **"Ãp Dá»¥ng"**
3. Náº¿u há»£p lá»‡: âœ… Hiá»ƒn thá»‹ má»©c giáº£m
4. Náº¿u sai: âŒ Hiá»ƒn thá»‹ lá»—i

### **BÆ°á»›c 7: Xem TÃ³m Táº¯t & Thanh ToÃ¡n**
**BÃªn pháº£i (Cá»™t 2):**
- Xem chi tiáº¿t giÃ¡:
  - GiÃ¡ sáº£n pháº©m
  - PhÃ­ giao hÃ ng
  - Thuáº¿ VAT 10%
  - Giáº£m giÃ¡ (náº¿u cÃ³)
  - **Tá»•ng cá»™ng cuá»‘i cÃ¹ng**

### **BÆ°á»›c 8: HoÃ n ThÃ nh ÄÆ¡n HÃ ng**
1. Click nÃºt **"Thanh ToÃ¡n [Sá»‘ tiá»n]"** (mÃ u Ä‘á»)
2. Há»‡ thá»‘ng kiá»ƒm tra:
   - TÃªn ngÆ°á»i nháº­n âœ“
   - SÄT âœ“
   - Äá»‹a chá»‰ âœ“
   - Náº¿u chá»n tháº»: Kiá»ƒm tra thÃ´ng tin tháº» âœ“
3. Náº¿u há»£p lá»‡:
   - âœ… Gá»­i Ä‘Æ¡n hÃ ng tá»›i backend
   - âœ… Hiá»ƒn thá»‹ "Äáº·t hÃ ng thÃ nh cÃ´ng! ğŸ‰"
   - âœ… Chuyá»ƒn hÆ°á»›ng tá»›i `/lich-su-don-hang`
4. Náº¿u khÃ´ng há»£p lá»‡:
   - âŒ Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i cá»¥ thá»ƒ

---

## ğŸ“Š Dá»¯ Liá»‡u Gá»­i Tá»›i Backend

Khi click "Thanh ToÃ¡n", há»‡ thá»‘ng gá»­i POST request tá»›i:
```
POST /api/client/don-hang/create
Authorization: Bearer [token]

{
  "id_khach_hang": 1,
  "id_san_pham": 1,
  "ten_san_pham": "ğŸ” KhÃ´ GÃ  Cay SiÃªu Cáº¥p",
  "vi": "Cay siÃªu cáº¥p",
  "kich_thuoc": "Lá»›n (500g)",
  "so_luong": 2,
  "gia_don_vi": 99000,
  "tien_hang": 198000,
  "tien_ship": 30000,
  "thue": 22800,
  "tien_giam": 50000,
  "tong_tien": 200800,
  "ghi_chu": "ThÃªm muá»‘i",
  
  "nguoi_nhan": "Pháº¡m Thá»‹ Dung",
  "sdt": "0934567890",
  "dia_chi": "123 Nguyá»…n TrÃ£i, Q1, TP.HCM",
  "phuong_thuc_giao": "express",
  "ghi_chu_giao": "Gá»i trÆ°á»›c khi tá»›i",
  
  "phuong_thuc_thanh_toan": "card",
  "thong_tin_the": {
    "ten_chu_the": "PHAM THI DUNG",
    "so_the": "3456",
    "ngay_het_han": "12/25"
  }
}
```

---

## ğŸ¨ Giao Diá»‡n & Thiáº¿t Káº¿

### **MÃ u Sáº¯c & Chá»§ Äá»**
- ğŸ”´ **MÃ u chÃ­nh:** Äá» (#dc3545, #ff6b6b)
- ğŸŸ¡ **MÃ u phá»¥:** VÃ ng (#ffc107, #ff9800)
- âšª **Ná»n:** Gradient nháº¹ (fff5f7 â†’ ffe0e6)
- ğŸ” **Icon/Emoji:** ğŸ” ğŸ”¥ ğŸ’³ ğŸ’° ğŸ¦ ğŸ“¦ ğŸŸï¸

### **Layout**
- **Desktop:** 2 cá»™t (8/12 + 4/12)
- **Tablet:** 1 cá»™t (tuáº§n tá»±)
- **Mobile:** 1 cá»™t (full width)

### **Card Components**
- Border-radius: 15px
- Box-shadow: lg (0.5rem 1rem rgba)
- Transition: smooth (0.3s ease)

---

## ğŸ”§ Lá»—i & Xá»­ LÃ½

| Lá»—i | NguyÃªn NhÃ¢n | Giáº£i PhÃ¡p |
|-----|-----------|----------|
| "KhÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u sáº£n pháº©m" | KhÃ´ng cÃ³ dá»¯ liá»‡u trong sessionStorage | Quay láº¡i chá»n sáº£n pháº©m |
| "Vui lÃ²ng nháº­p tÃªn ngÆ°á»i nháº­n" | TrÆ°á»ng trá»‘ng | Nháº­p tÃªn |
| "Vui lÃ²ng nháº­p sá»‘ Ä‘iá»‡n thoáº¡i" | TrÆ°á»ng trá»‘ng | Nháº­p SÄT |
| "Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰ giao hÃ ng" | TrÆ°á»ng trá»‘ng | Nháº­p Ä‘á»‹a chá»‰ |
| "Vui lÃ²ng nháº­p sá»‘ tháº» há»£p lá»‡" | Sá»‘ tháº» < 16 chá»¯ | Nháº­p Ä‘á»§ 16 chá»¯ |
| "MÃ£ khuyáº¿n mÃ£i khÃ´ng há»£p lá»‡" | MÃ£ sai | DÃ¹ng mÃ£ cÃ³ sáºµn |
| "CÃ³ lá»—i xáº£y ra" | API error | Thá»­ láº¡i hoáº·c liÃªn há»‡ há»— trá»£ |

---

## ğŸ§ª Test MÃ£ Khuyáº¿n MÃ£i

```
WELCOME10 â†’ Giáº£m 50.000â‚«
CHODEN20  â†’ Giáº£m 100.000â‚«
FREE50    â†’ Giáº£m 50.000â‚«
```

---

## ğŸ“± Tráº¡ng ThÃ¡i Hiá»‡n Táº¡i

âœ… **HoÃ n ThÃ nh:**
- Chá»n sáº£n pháº©m & lá»±a chá»n cáº¥u hÃ¬nh
- Hiá»ƒn thá»‹ sáº£n pháº©m trÃªn trang Ä‘áº·t hÃ ng
- Form thÃ´ng tin giao hÃ ng
- 4 phÆ°Æ¡ng thá»©c thanh toÃ¡n
- Form tháº» ngÃ¢n hÃ ng (hiá»‡n/áº©n)
- MÃ£ khuyáº¿n mÃ£i
- TÃ³m táº¯t Ä‘Æ¡n hÃ ng & tÃ­nh giÃ¡
- Validation form
- Gá»­i dá»¯ liá»‡u tá»›i API
- Xá»­ lÃ½ káº¿t quáº£ & chuyá»ƒn hÆ°á»›ng

â³ **Cáº§n LÃ m ThÃªm (Tuá»³ chá»n):**
- Táº¡o API endpoint `/api/client/don-hang/create` (backend)
- Táº¡o trang `/lich-su-don-hang` (lá»‹ch sá»­ Ä‘Æ¡n)
- TÃ­ch há»£p gateway thanh toÃ¡n tháº­t (Stripe, Paypal, etc)
- Email xÃ¡c nháº­n Ä‘Æ¡n hÃ ng
- Tracking Ä‘Æ¡n hÃ ng realtime

---

## ğŸ¯ Káº¿t Luáº­n

Luá»“ng mua hÃ ng Ä‘Ã£ **hoÃ n toÃ n hoáº¡t Ä‘á»™ng** tá»« chá»n sáº£n pháº©m â†’ nháº­p thÃ´ng tin giao hÃ ng â†’ chá»n thanh toÃ¡n â†’ gá»­i Ä‘Æ¡n hÃ ng!

**HÃ£y thá»­ nghiá»‡m:** VÃ o `/chi-tiet-phim/1` â†’ Click "Mua khÃ´ gÃ " â†’ Chá»n sáº£n pháº©m â†’ Nháº­p thÃ´ng tin â†’ Thanh toÃ¡n! ğŸ”ğŸ”¥
